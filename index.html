<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WordPad</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-btn" data-tab="file">File</button>
        <button class="tab-btn active" data-tab="home">Home</button>
        <button class="tab-btn" data-tab="insert">Insert</button>
        <button class="tab-btn" data-tab="docops">Document Ops</button>
        <button class="tab-btn" data-tab="export">Export</button>
        <button class="tab-btn" data-tab="findreplace">Find & Replace</button>
        <button id="modeToggle" class="mode-btn" aria-pressed="false">ğŸŒ™ Dark</button>
        <span id="currentFile" style="margin-left:20px;font-weight:bold;">Current File: Untitled</span>
        <div style="margin-left:auto; display:flex; gap:6px;">
            <button onclick="historyManager.undo()">â†©ï¸ Undo</button>
            <button onclick="historyManager.redo()">â†ªï¸ Redo</button>
        </div>
    </div>
    <!-- File Toolbar -->
    <div class="toolbar" id="file">
        <button onclick="fileManager.newDoc()">New</button>
        <button onclick="fileManager.openFile()">Open</button>
        <button onclick="fileManager.toggleAutoSave()">Toggle AutoSave</button>
        <span id="autosaveStatus">AutoSave: OFF</span>
    </div>

    <!-- Home Toolbar -->
    <div class="toolbar" id="home" style="display:flex;">
        <select onchange="editor.execCmd('fontName', this.value)">
            <option value="Calibri">Calibri</option>
            <option value="Arial">Arial</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Georgia">Georgia</option>
            <option value="Verdana">Verdana</option>
        </select>
        <select onchange="editor.execCmd('fontSize', this.value)">
            <option value="3">12</option>
            <option value="4">14</option>
            <option value="5">18</option>
            <option value="6">24</option>
            <option value="7">36</option>
        </select>
        <select onchange="editor.formatBlock(this.value)">
            <option value="P">Normal</option>
            <option value="H1">Heading 1</option>
            <option value="H2">Heading 2</option>
        </select>
        <button id="btn-bold" onclick="editor.execCmd('bold')"><b>B</b></button>
        <button id="btn-italic" onclick="editor.execCmd('italic')"><i>I</i></button>
        <button id="btn-underline" onclick="editor.execCmd('underline')"><u>U</u></button>

        <input type="color" onchange="editor.execCmd('foreColor', this.value)">
        <input type="color" onchange="editor.execCmd('hiliteColor', this.value)">
        <button id="btn-justifyLeft" onclick="editor.execCmd('justifyLeft')">Left</button>
        <button id="btn-justifyCenter" onclick="editor.execCmd('justifyCenter')">Center</button>
        <button id="btn-justifyRight" onclick="editor.execCmd('justifyRight')">Right</button>
        <button id="btn-bulleted" onclick="editor.execCmd('insertUnorderedList')">â€¢ Bulleted</button>
        <button id="btn-numbered" onclick="editor.execCmd('insertOrderedList')">1. Numbered</button>
    </div>

    <!-- Insert Toolbar -->
    <div class="toolbar" id="insert" style="gap:12px; flex-wrap:wrap;">

        <!-- Link -->
        <input type="text" id="linkUrl" placeholder="Link" style="width:120px;">
        <button onclick="inserter.insertLink()">ğŸ”—</button>

        <!-- Image -->
        <button onclick="inserter.insertImage()">ğŸ“ Img</button>
        <input type="text" id="imgUrl" placeholder="Image URL" style="width:120px;">
        <button onclick="inserter.insertImageURL()">ğŸŒ</button>

        <!-- Table -->
        <input type="number" id="tableRows" min="1" placeholder="R" style="width:40px;">
        <input type="number" id="tableCols" min="1" placeholder="C" style="width:40px;">
        <button onclick="inserter.insertTable()">ğŸ“‘</button>

        <!-- Table Tools -->
        <div id="table-tools" class="table-controls" style="display:none;">
            <button title="Add Row" onclick="inserter.addRow()">â•â†”</button>
            <button title="Add Col" onclick="inserter.addColumn()">â•â†•</button>
            <button title="Del Row" onclick="inserter.removeRow()">âŒâ†”</button>
            <button title="Del Col" onclick="inserter.removeColumn()">âŒâ†•</button>
            <button title="Del Table" onclick="inserter.removeTable()">ğŸ—‘ï¸</button>
        </div>
    </div>

    <!-- Document Ops Toolbar -->
    <div class="toolbar" id="docops">
        <button onclick="viewer.clearFormatting()">Clear Formatting</button>
        <button onclick="viewer.resetContent()">Reset Document</button>
        <button onclick="viewer.copyPlain()">Copy Plain Text</button>
        <button onclick="viewer.copyHTML()">Copy HTML</button>
        <button onclick="viewer.previewDoc()">Preview</button>
    </div>

    <!-- Export Toolbar -->
    <div class="toolbar" id="export">
        <input id="docTitle" placeholder="Title">
        <input id="docAuthor" placeholder="Author">
        <button onclick="exporter.exportWord()">Export .doc</button>
        <button onclick="exporter.exportPDF()">Export PDF</button>
        <span id="exportStatus" style="margin-left:12px; font-weight:bold;"></span>
    </div>

    <!-- Find & Replace Toolbar -->
    <div class="toolbar" id="findreplace">
        <input type="text" id="findText" placeholder="Find text">
        <input type="text" id="replaceText" placeholder="Replace with">
        <button id="btn-find-next" onclick="finder.findNext()">Find Next</button>
        <button id="btn-replace" onclick="finder.replace()">Replace</button>
        <button id="btn-replace-all" onclick="finder.replaceAll()">Replace All</button>
        <button id="btn-clear" onclick="finder.clearHighlights()">Clear</button>
        <span id="findStatus" class="find-status" aria-live="polite"></span>
    </div>

    <!-- Editor Area -->
    <div class="page" id="pageContainer">
        <div id="editor" class="editor-page" contenteditable="true"></div>
    </div>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <div id="newDocModal" class="modal" style="display:none;">
        <div class="modal-content">
            <p>Do you want to save before creating a new document?</p>
            <div class="modal-actions">
                <button id="newDocSave">ğŸ’¾ Save</button>
                <button id="newDocNoSave">ğŸ†• Don't Save</button>
                <button id="newDocCancel">âŒ Cancel</button>
            </div>
        </div>
    </div>
</body>

</html>